<html>
<head>
<style type="text/css">
div.out {
    display: inline-block;
    background-color: #88ee88;
    margin-bottom: 10px;
    float: left;
}
div.out > div {
    width:100px;
    height:100px;
    opacity: 0.5;
    background-color: #000000;
}
canvas {
    width: 100px;
    height: 100px;
    display: block;
    opacity: 0.5;
}
</style>
<script type="text/javascript">
var framesLeft = 3;
function dumpTree() {
    if (window.layoutTestController) {
        window.layoutTestController.notifyDone();
    }
}

function testCanvas() {
    var canvases = document.getElementsByTagName('canvas');
    var ctx;
    for (var i=0; i < canvases.length; ++i) {
       ctx = canvases[i].getContext("2d");
       ctx.fillStyle = "#000000";
       ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
       // green should show through the black canvas and black div in equal amounts
    }

    if (framesLeft--)
        setTimeout(testCanvas, 16);
    else
        setTimeout(dumpTree, 16);


}

function runTest() {
    if (window.layoutTestController) {
        window.layoutTestController.dumpAsText(true);
        window.layoutTestController.waitUntilDone();
    }
    testCanvas();
}
</script>
</head>

<body onload="runTest();">
<!-- You should see identically colored rectangles -->
<div class="out">
  <canvas width="100" height="100"></canvas>
</div>
<div class="out">
  <div></div>
</div>

<div class="out">
  <canvas width="300" height="300"></canvas>
</div>

<div class="out">
  <div></div>
</div>

</body>
</html>
